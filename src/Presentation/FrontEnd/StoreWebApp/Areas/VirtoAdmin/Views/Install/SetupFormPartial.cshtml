@using VirtoCommerce.Web.Areas.VirtoAdmin.Models
@using VirtoCommerce.Web.Areas.VirtoAdmin.Resources
@model InstallModel
<h2>Database setup</h2>
<div id="inprogress"/>
@if (Model.HasStatusMessage)
{
    <div class="message-Information">
        <p>@Model.StatusMessage</p>
    </div>
}
<div id="errorarea" class="validation-summary-errors"></div>

@if (Model.HasErrorMessage)
{
    <div class="validation-summary-errors">
        <p>@Model.ErrorMessage</p>
        @if (Model.IsLogExists)
        {
        <p>Open @Html.ActionLink("log file", "DownloadLog") for more details on error.</p>
        }
    </div>
}
                        
    <fieldset class="data">
        @if (Model.DbAdminRequired)
        {
            <div>@Html.HiddenFor(m=>m.DbAdminRequired)</div>
            <div>
                @Html.LabelFor(m=>m.DbAdminUser)
                @Html.TextBoxFor(m=>m.DbAdminUser)
                @Html.Label(Resource.DbAdminUserTip, new { @class = "hint"})
                @Html.ValidationMessageFor(m=>m.DbAdminUser)
            </div>
            <div>
                @Html.LabelFor(m=>m.DbAdminPassword)
                @Html.PasswordFor(m=>m.DbAdminPassword)
                @Html.Label(Resource.DbAdminPasswordTip, new { @class = "hint"})
                @Html.ValidationMessageFor(m=>m.DbAdminPassword)
            </div>
        }
        <div>
            @Html.LabelFor(m=>m.DataSource)
            @Html.TextBoxFor(m=>m.DataSource)
            @Html.Label(Resource.DataSourceTip, new { @class = "hint"})
            @Html.ValidationMessageFor(m=>m.DataSource)
        </div>
        <div>
            @Html.LabelFor(m=>m.InitialCatalog)
            @Html.TextBoxFor(m=>m.InitialCatalog)
            @Html.Label(Resource.InitialCatalogTip, new { @class = "hint"})
            @Html.ValidationMessageFor(m=>m.InitialCatalog)
        </div>
        <div> 
            @Html.LabelFor(m=>m.DbUserName)
            @Html.TextBoxFor(m=>m.DbUserName)
            @Html.Label(Resource.DbUserNameTip, new { @class = "hint"})
            @Html.ValidationMessageFor(m=>m.DbUserName)
        </div>
        <div>
            @Html.LabelFor(m=>m.DbUserPassword)
            @Html.PasswordFor(m=>m.DbUserPassword,  new { value = Model.DbUserPassword})
            @Html.Label(Resource.DbUserPasswordTip, new { @class = "hint"})
            @Html.ValidationMessageFor(m=>m.DbUserPassword)
        </div>
        <div>
            @Html.LabelFor(m=>m.SetupSampleData)
            @Html.CheckBoxFor(m=>m.SetupSampleData)
        </div>
        <div>
            <button name="Action" type="submit" value="@InstallModel.SubmitAction.CreateDb">@Resource.SetupDatabase</button>
        </div>
    </fieldset>